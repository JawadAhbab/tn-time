function r(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.push.apply(n,t)}return n}function e(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?r(Object(u),!0).forEach((function(r){n(e,r,u[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):r(Object(u)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(u,r))}))}return e}function n(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function t(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null==n)return;var t,u,i=[],o=!0,c=!1;try{for(n=n.call(r);!(o=(t=n.next()).done)&&(i.push(t.value),!e||i.length!==e);o=!0);}catch(r){c=!0,u=r}finally{try{o||null==n.return||n.return()}finally{if(c)throw u}}return i}(r,e)||function(r,e){if(!r)return;if("string"==typeof r)return u(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}import"tn-consoler";import{isArray as i}from"tn-validate";import{numpad as o}from"tn-numpad";var c={minimal:{yr:["y","y"],mo:["mo","mo"],day:["d","d"],hr:["h","h"],min:["m","m"],sec:["s","s"],msec:["ms","ms"]},short:{yr:[" yr"," yrs"],mo:[" mo"," mos"],day:[" day"," days"],hr:[" hr"," hrs"],min:[" min"," mins"],sec:[" sec"," secs"],msec:[" msec"," msecs"]},verbose:{yr:[" year"," years"],mo:[" month"," months"],day:[" day"," days"],hr:[" hour"," hours"],min:[" minute"," minutes"],sec:[" second"," seconds"],msec:[" millisecond"," milliseconds"]}},a=864e5,s={msec:1,yr:31536e6,sec:1e3,min:6e4,hr:36e5,day:a,mo:2592e6},m={decimal:0,variant:"verbose",formats:{},prefix:"",postfix:"",yr:!0,mo:!1,day:!0,hr:!0,min:!0,sec:!0,msec:!1};function f(r,n){var u=function(r,n){var t=(new Date).getTime()-r.getTime();return{agoms:t<0?0:t,opts:e(e({},m),n||{})}}(r,n),o=u.agoms,a=u.opts,f=function(r){var e=c[r.variant];return Object.entries(r.formats).forEach((function(r){var n=t(r,2),u=n[0],o=n[1];e[u]=i(o)?o:[o,o]})),function(n,t,u){var i=parseFloat(n.toFixed(t));return"".concat(r.prefix).concat(i).concat(e[u][i<=1?0:1]).concat(r.postfix)}}(a),y=function(r,e){var n=e.yr,t=e.mo,u=e.day,i=e.hr,o=e.min,c=e.sec,a="yr";return t&&(a="mo"),u&&(a="day"),i&&(a="hr"),o&&(a="min"),c&&(a="sec"),e.msec&&(a="msec"),r>=s.yr&&n||"yr"===a?{number:r/s.yr,key:"yr"}:r>=s.mo&&t||"mo"===a?{number:r/s.mo,key:"mo"}:r>=s.day&&u||"day"===a?{number:r/s.day,key:"day"}:r>=s.hr&&i||"hr"===a?{number:r/s.hr,key:"hr"}:r>=s.min&&o||"min"===a?{number:r/s.min,key:"min"}:r>=s.sec&&c||"sec"===a?{number:r/s.sec,key:"sec"}:{number:r,key:"msec"}}(o,a),l=y.key;return f(y.number,a.decimal,l)}var y="d|D|m|M|y|Y|h|H|i|s|S|a|A".split("|"),l="d|D|m|M|h|H|i|s|S".split("|");function d(r){var e=[],n=!1,t="",u=!1;return r.split("").forEach((function(r){if("{"!==r){if("}"===r)return e.push({iskey:!1,char:t}),t="",void(n=!1);if(n)t+=r;else{if(u)y.includes(r)&&r===u?e.push({iskey:!0,char:r+r}):y.includes(r)?(e.push({iskey:!0,char:u}),e.push({iskey:!0,char:r})):(e.push({iskey:!0,char:u}),e.push({iskey:!1,char:r}));else{if(l.includes(r))return void(u=r);y.includes(r)?e.push({iskey:!0,char:r}):e.push({iskey:!1,char:r})}u=!1}}else n=!0})),u&&e.push({iskey:!0,char:u}),e}function h(r){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.getHours(),t="am";return n>=12&&(t="pm"),e&&(t=t.toUpperCase()),t}function p(r,e){var n,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n="date"===e?r.getDate():"min"===e?r.getMinutes():"sec"===e?r.getSeconds():r.getMilliseconds(),t){var u="ms"===e?3:2;n=o(n,u)}return n}var v="Sun|Mon|Tue|Wed|Thu|Fri|Sat".split("|"),b="Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|");function g(r){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.getDay();return e?b[n]:v[n]}function D(r,e,n){var t=r.getHours();return e||(t>12&&(t-=12),0===t&&(t=12)),n&&(t=o(t,2)),t}var O="Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".split("|"),w="January|February|March|April|May|June|July|August|September|October|November|December".split("|");function S(r,e,n){var t=r.getMonth();return e?n?w[t]:O[t]:(++t,n?o(t,2):t)}function k(r){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.getFullYear();return e||(n=n.toString().substr(2,2)),n}function j(r,e){var n="",t=function(r){return{d:function(){return p(r,"date")},dd:function(){return p(r,"date",!0)},D:function(){return g(r)},DD:function(){return g(r,!0)},m:function(){return S(r,!1,!1)},mm:function(){return S(r,!1,!0)},M:function(){return S(r,!0,!1)},MM:function(){return S(r,!0,!0)},y:function(){return k(r)},Y:function(){return k(r,!0)},h:function(){return D(r,!1,!1)},hh:function(){return D(r,!1,!0)},H:function(){return D(r,!0,!1)},HH:function(){return D(r,!0,!0)},i:function(){return p(r,"min")},ii:function(){return p(r,"min",!0)},s:function(){return p(r,"sec")},ss:function(){return p(r,"sec",!0)},S:function(){return p(r,"ms")},SS:function(){return p(r,"ms",!0)},a:function(){return h(r)},A:function(){return h(r,!0)}}}(r);return e.forEach((function(r){r.iskey?n+=t[r.char]().toString():n+=r.char})),n}var M=function(r){var e=r?new Date(r):new Date;return isNaN(e.getTime())&&(e=new Date),{getDate:function(){return e},format:function(r){return function(r){var e=d(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd-mm-Y");return j(r,e)}(e,r)},ago:function(r){return f(e,r)},shift:function(r,n){return function(r,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",t=r.getTime()+e*s[n];return new Date(t)}(e,r,n)},round:function(){return function(r){var e=new Date(r);return new Date(e.setHours(0,0,0,0))}(e)},isToday:function(){return function(r){var e=new Date(r),n=new Date;return e.setHours(0,0,0,0)===n.setHours(0,0,0,0)}(e)},isPast:function(){return function(r){return r.getTime()<(new Date).getTime()}(e)},isFuture:function(){return function(r){return r.getTime()>(new Date).getTime()}(e)}}};export{M as time};
